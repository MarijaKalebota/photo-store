# photo-store
A storefront API for ordering prints of photographs.

Written in Python using the Django framework.

## Set up

This project assumes you have Python 3.5 or later installed on your machine.
It uses pipenv to manage dependencies. Follow the instructions below to set up pipenv.
All command blocks start at the project's root folder.

- install pipenv
```
python3 -m pip install pipenv
```
- install project dependencies
```
cd photo_store
python3 -m pip pipenv install
```

All following commands should be executed in the pipenv shell. To activate it, run:
```
pipenv shell
```
To deactivate it, simply run 
```
exit
```

## Run
When the dependencies have been installed, the following commands can be used to run the application.
```
cd photo_store
python manage.py runserver
```
Note: This runs the server in debug mode (sufficient for the application's current purposes).

## Database
This project uses Django's built-in SQLite database. Before using the application, it would be prudent to populate it with sample data. CSV files to populate the database are provided in /populate_db/. Instructions for how to import CSV files into SQLite can be found here: https://www.sqlitetutorial.net/sqlite-import-csv/

## Endpoints
When the application is running, the following two endpoints can be accessed:
- http://127.0.0.1:8000/photo-store/photos/ - GET returns all photos
- http://127.0.0.1:8000/photo-store/order/ - POST with correct form data places an order

A Postman collection with some sample requests for manual exploration of the endpoints is provided here: https://www.getpostman.com/collections/f8dbe9f2707367a3f498

To import it to Postman:
- open Postman app
- go to File > Import > Import From Link
- paste the link into the provided box
- click "Import"

## Running tests
Tests can be run by executing the following commands:
```
cd photo_store
python manage.py test
```
### Coverage
The coverage tool can be run by executing:
```
coverage run --source='.' manage.py test photo_store
```
The report can be seen by running:
```
coverage report
```
The HTML report can be generated by executing:
```
coverage html
```
The HTML report will be located in photo_store/htmlcov/index.html

## Continuous integration
This project uses CircleCI for continuous integration. The CircleCI configuration can be found in .circleci/config.yml

## Formatting
This project uses ```isort``` for import sorting and ```autopep8``` for code formatting. They can be run using the following commands:
- run isort
```
isort -rc .
```
- run autopep8
```
autopep8 -r --in-place .
```

## Credits
The images used in this project were obtained from: http://www.vision.caltech.edu/Image_Datasets/Caltech101/
